# Руководство по использованию Trading Agent

## Быстрый старт

### 1. Настройка workspace

```bash
cd trading-workspace
ln -s ../trading-agent-cursor/.cursor/rules .cursor/rules
ln -s ../trading-agent-cursor/.claude .claude
```

### 2. Проверка MCP серверов

Убедитесь, что `mcp.json` настроен правильно и MCP серверы доступны.

### 3. Открытие в Claude Code/OpenCode/Cursor

Откройте `trading-workspace` в редакторе с поддержкой MCP.

## Примеры использования

### Домашнее задание (утром, до открытия рынка)

```
Пользователь: Проведи скрининг для интрадея

Агент: [Получает данные через MCP, анализирует инструменты, 
        возвращает список кандидатов]

Пользователь: Проанализируй AAPL

Агент: [Анализирует AAPL: уровни, предпосылки, формирует сценарий]

Пользователь: Добавь AAPL на лонг-лист

Агент: [Создаёт файл в watchlist/YYYY-MM-DD/longs.md]
```

### Торговая сессия

```
Пользователь: Покажи мой лист на сегодня

Агент: [Читает watchlist/YYYY-MM-DD/, выводит список]

Пользователь: Проверь условия для входа в AAPL

Агент: [Получает текущую цену через MCP, сравнивает с триггером,
        сообщает о готовности к входу]
```

### Запись сделки

```
Пользователь: Запиши сделку: AAPL Long, вход 185.62 @ 10:45, 
              выход 186.80 @ 14:20, P/L +$118

Агент: [Добавляет запись в journal/YYYY-MM/YYYY-MM-DD.md и 
        journal/YYYY-MM/trades.jsonl]
```

### Анализ статистики

```
Пользователь: Покажи статистику за январь

Агент: [Анализирует journal/2026-01/, выводит метрики:
        - Win rate
        - Средний P/L
        - Общий P/L
        - Анализ ошибок]
```

## Работа с методологией

### Вопросы по методологии

```
Пользователь: Что говорит Герчик о работе с уровнями?

Агент: [Запрашивает информацию из knowledge base через RAG,
        возвращает релевантные фрагменты с цитатами]
```

### Проверка соответствия методологии

```
Пользователь: Соответствует ли мой сценарий по AAPL методологии Герчика?

Агент: [Проверяет сценарий по критериям из knowledge base,
        указывает на соответствие или несоответствие]
```

## Структура данных

### Watchlist

Файлы создаются автоматически при добавлении инструментов:
- `watchlist/YYYY-MM-DD/longs.md` - инструменты для покупки
- `watchlist/YYYY-MM-DD/shorts.md` - инструменты для продажи

### Homework

Файлы анализа инструментов:
- `homework/YYYY-MM-DD/SYMBOL.md` - полный анализ инструмента

### Journal

Журнал сделок:
- `journal/YYYY-MM/YYYY-MM-DD.md` - markdown журнал дня
- `journal/YYYY-MM/trades.jsonl` - структурированные данные для анализа

## Важные напоминания

1. **Всегда выполняйте домашнее задание** перед торговлей
2. **Следуйте плану** - не меняйте SL/TP во время сделки
3. **Ведите статистику** - записывайте все сделки
4. **Анализируйте результаты** - учитесь на ошибках

## Troubleshooting

### MCP сервер не отвечает

Проверьте:
- Правильность путей в `mcp.json`
- Доступность markethub-mcp сервера
- Логи MCP сервера

### Агент не понимает команды

Убедитесь, что:
- Симлинки на правила созданы правильно
- Файл `.claude/CLAUDE.md` доступен
- MCP серверы подключены

### Данные не сохраняются

Проверьте:
- Права на запись в `trading-workspace`
- Структуру директорий
- Формат данных соответствует схемам
